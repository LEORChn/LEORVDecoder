var proc=0;var onsearch={};var openhome={};var urlnotsupport={};var getyoukujson={};var geturlretry={};var v={};function main(){reset();return gettask()}function search(w){reset();proc=1;onsearch.url+=w;return JSON.stringify(onsearch)}function ver(){return 1}function minexecver(){return 1}function gettask(){proc++;switch(proc){case 1:return JSON.stringify(openhome);case 2:return JSON.stringify(getyoukujson);case 3:return JSON.stringify(v)}}function submit(u){switch(proc){case 1:if(u.indexOf("video/id_")>-1){if(u.indexOf(".html")>-1||u.indexOf("?")>-1){getyoukujson.url+=u.split("/id_")[1].split("==")[0]+"=="}else{getyoukujson.url+=u.split("/id_")[1]}getyoukujson.url+=getyoukujson.tmp0;return gettask()}return JSON.stringify(urlnotsupport);case 2:u=eval("("+u+")");if(u.data!=undefined){v={};v.act="finish";v.name=u.data.video.title;v.v=[];var t={};u=u.data.stream;for(var i=0;i<u.length;i++){t.len=u[i].milliseconds_video;t.size=u[i].size;t.scr=[u[i].width,u[i].height];t.part=u[i].segs.length;t.parts=[];for(var i2=0;i2<u[i].segs.length;i2++){t.parts.push(u[i].segs[i2].cdn_url)}v.v.push(t);t={}}return gettask()}else{return JSON.stringify(geturlretry)}}}function reset(){proc=0;var j={};j.act="browser";j.url="http://www.soku.com/search_video/q_";j.nextact="submit";j.nextarg=1;j.argtype="browserurl";j.autoexec=0;onsearch=j;j={};j.act="browser";j.url="http://www.youku.com/";j.nextact="submit";j.nextarg=1;j.argtype="browserurl";j.autoexec=0;openhome=j;j={};j.act="warn";j.msg="\u7F51\u5740\u4E0D\u7B26\u5408\u89C4\u8303\u3002";j.nextact="submit";j.nextarg=1;j.argtype="browserurl";j.autoexec=0;urlnotsupport=j;j={};j.act="geturl";j.url="https://ups.youku.com/ups/get.json?vid=";j.tmp0="&ccode=0501&client_ip=0.0.0.0&client_ts="+(parseInt(new Date().getTime()/1000))+"&utid="+getrandomstr();j.nextact="submit",j.nextarg=1;j.argtype="return";j.autoexec=1;getyoukujson=j;j={};j.act="warn";j.msg="get.json\u6570\u636E\u6709\u8BEF\u3002";j.nextact="submit";j.nextarg=1;j.argtype="return";j.autoexec=1;geturlretry=j;j={}}function getrandomstr(){var fn="";var libra="0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM";for(var i=0;i<rd(24,26);i++){fn+=libra.charAt(rd(0,61))}return fn}function rd(min,max){return min+Math.round(Math.random()*(max-min))};