var proc=0;var onsearch={};var openhome={};var urlnotsupport={};var getyoukujson={};var geturlretry={};var v={};function main(){reset();return gettask()}function search(a){reset();proc=1;onsearch.url+=a;return JSON.stringify(onsearch)}function ver(){return 1}function minexecver(){return 1}function gettask(){proc++;switch(proc){case 1:return JSON.stringify(openhome);case 2:return JSON.stringify(getyoukujson);case 3:return JSON.stringify(v)}}function submit(u){switch(proc){case 1:if(u.indexOf("video/id_")>-1){if(u.indexOf(".html")>-1||u.indexOf("?")>-1){getyoukujson.url+=u.split("/id_")[1].split("==")[0]+"=="}else{getyoukujson.url+=u.split("/id_")[1]}getyoukujson.url+=getyoukujson.tmp0;return gettask()}return JSON.stringify(urlnotsupport);case 2:u=eval("("+u+")");if(u.data!=undefined){v={};v.act="finish";v.name=u.data.video.title;v.v=[];var t={};u=u.data.stream;for(var i=0;i<u.length;i++){t.len=u[i].milliseconds_video;t.size=u[i].size;t.scr=[u[i].width,u[i].height];t.part=u[i].segs.length;t.parts=[];for(var i2=0;i2<u[i].segs.length;i2++){t.parts.push(u[i].segs[i2].cdn_url)}v.v.push(t);t={}}return gettask()}else{return JSON.stringify(geturlretry)}}}function reset(){proc=0;var a={};a.act="browser";a.url="http://www.soku.com/search_video/q_";a.nextact="submit";a.nextarg=1;a.argtype="browserurl";a.autoexec=0;onsearch=a;a={};a.act="browser";a.url="http://www.youku.com/";a.nextact="submit";a.nextarg=1;a.argtype="browserurl";a.autoexec=0;openhome=a;a={};a.act="warn";a.msg="\u7F51\u5740\u4E0D\u7B26\u5408\u89C4\u8303\u3002";a.nextact="submit";a.nextarg=1;a.argtype="browserurl";a.autoexec=0;urlnotsupport=a;a={};a.act="geturl";a.url="https://ups.youku.com/ups/get.json?vid=";a.tmp0="&ccode=0501&client_ip=0.0.0.0&client_ts="+(parseInt(new Date().getTime()/1000))+"&utid="+getrandomstr();a.nextact="submit",a.nextarg=1;a.argtype="return";a.autoexec=1;getyoukujson=a;a={};a.act="warn";a.msg="get.json\u6570\u636E\u6709\u8BEF\u3002";a.nextact="submit";a.nextarg=1;a.argtype="return";a.autoexec=1;geturlretry=a;a={}}function getrandomstr(){var c="";var b="0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM";for(var a=0;a<rd(24,26);a++){c+=b.charAt(rd(0,61))}return c}function rd(b,a){return b+Math.round(Math.random()*(a-b))};